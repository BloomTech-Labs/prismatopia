# The Apollo Layer

This is an Apollo Server that is pre-configured for use in this stack. It has some stuff already configured:

## Authentication

The API is protected by requiring all inbound API calls to have a bearer token in the form of a JWT passed in the `Authorization` header:

  ```text
  {
    Authorization: Bearer <Base 64 Encoded JWT>
  }
  ```

  The `okta/jwt-verifier` module is used to verify the JWT.

## Source Code

`index.ts` is the main entry point that starts the server

`schema/generated/prisma.graphql` is a schema that was generated by Prisma based on the data model. It's a big, wide-open schema that can do just about anything we need with the data. We don't want to expose this directly to through the API, because it is probably way more power than we want to give our users. Instead Apollo uses...

`schema/schema.graphql` is the schema that we present to our API consumers. It will typically import pieces of the Prisma generated schema, which will allow our Apollo schema to closely match our underlying Prisma schema.

# Development
1. Create Github Personal Access Token (Read/Write/Delete Packages)
2. Docker login `docker login -u <username> -p <personal access token> docker.pkg.github.com`
3. docker images docker.pkg.github.com/Lambda-School-Labs/prismatopia
4. docker build -t docker.pkg.github.com/lambda-school-labs/prismatopia/default:1.0 .
5. docker push docker.pkg.github.com/lambda-school-labs/prismatopia/default:1.0